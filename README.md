# Medical Entity and Relation Annotation Tool

This project is a web-based tool for medical experts to annotate medical entities and relationships in clinical narratives. The annotations can be exported for use in healthcare NLP model training and evaluation.

## Project Folder Structure

```
MedicalAnnotationTool/
│
├── backend/                  # FastAPI backend (app code, dependencies)
│   └── app/                  # main.py and related modules
│   └── requirements.txt
│
├── frontend/                 # (Planned) Web UI (React or simple JS)
│   └── ...
│
├── data/                     # Sample texts and exported annotations
│   └── sample_texts.txt
│   └── sample_annotations.json
│
├── docs/                     # Design document, extended README/report
│   └── design.md
│   └── report.md
│
├── scripts/                  # Utility scripts (optional)
│   └── ...
│
├── tests/                    # Automated tests
│   └── ...
│
├── docker-compose.yml        # Orchestrates local services
├── Dockerfile                # Backend container image
├── .gitignore
└── README.md
```

## Quick Start (Local with Docker)

Prerequisites: Docker Desktop.

1. Clone the repository.
2. Build and start the backend container:
	```powershell
	docker compose up --build
	```
3. Verify health endpoint:
	```powershell
	curl http://localhost:8000/health
	```
4. Explore the autogenerated docs (FastAPI): http://localhost:8000/docs
5. Load sample abstracts (first time only):
	```powershell
	curl -X POST http://localhost:8000/bootstrap
	```
6. Explore the controlled vocabulary: http://localhost:8000/vocab
7. List loaded documents:
	```powershell
	curl http://localhost:8000/documents
	```
8. (Optional) Stop containers:
	```powershell
	docker compose down
	```

## API Summary (Initial Backend)
Endpoints (subject to change as frontend is added):
- POST /documents
- GET /documents
- GET /documents/{id}
- POST /documents/{id}/entities
- POST /documents/{id}/relations
- GET /documents/{id}/export
- POST /import (upload JSON export)
- GET /health
 - GET /vocab (controlled entity/relation types)
 - POST /bootstrap (ingest raw abstracts into documents)

Example workflow (single document):
1. POST /bootstrap
2. GET /documents -> pick an id (e.g., abstract1)
3. Add entity:
	```powershell
	curl -X POST http://localhost:8000/documents/abstract1/entities ^
	  -H "Content-Type: application/json" ^
	  -d "{\"start\":0,\"end\":12,\"text\":\"Hypertension\",\"type\":\"Disease\"}"
	```
4. Create relation (needs two entity IDs — retrieve via GET /documents/{id}):
	```powershell
	curl -X POST http://localhost:8000/documents/abstract1/relations ^
	  -H "Content-Type: application/json" ^
	  -d "{\"source_entity_id\":\"<eid1>\",\"target_entity_id\":\"<eid2>\",\"relation_type\":\"treats\"}"
	```
5. Export annotated document:
	```powershell
	curl http://localhost:8000/documents/abstract1/export
	```

## Roadmap (Time-Constrained)
Phase 1 (done): Backend scaffold + Docker.
Phase 2: Minimal frontend (document view, entity selection, relation linking).
Phase 3: Export/import polish + sample dataset.
Phase 4 (later): Reintroduce Terraform + Azure hosting and optional LLM suggestions.

---
No emojis are used in this documentation.
